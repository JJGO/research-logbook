%% Jose Javier Gonzalez Ortiz %%
%% Custom LaTex Configuration %%
%% 2016-05-10                 %%

%%%%%%%%%%%%
% PACKAGES %
%%%%%%%%%%%%

\usepackage[T1]{fontenc} % Use 8-bit encoding that has 256 glyphs
\usepackage[utf8]{inputenc} % For Spanish characters
\usepackage[USenglish]{babel} % USEnglish localisation
% =========== General Formatting =============
\usepackage[hmargin=2cm,vmargin=2.5cm]{geometry} % Margin sizes
\usepackage{microtype} % Slightly tweak font spacing for aesthetics
\usepackage{fancyhdr} % Allows for nice header and footer
\usepackage{sectsty} % Allows customizing section commands
\usepackage{appendix} % Enables appendices
\usepackage{enumerate} % Custom numerate, useful for i,ii,iii... I,II,III...
% \usepackage{hyperref} % For hyperlinks in the PDF
\usepackage[colorlinks = true,
            linkcolor = red,
            urlcolor  = blue,
            citecolor = green,
            filecolor = cyan,
            anchorcolor = blue]{hyperref}
\usepackage[usenames,dvipsnames]{xcolor} % Required for custom colors
\usepackage{lastpage} %  par­tic­u­larly use­ful in the page footer that says: Page N of M.

% =============== Math ===============
\usepackage{amsmath} % Standard math packages
\usepackage{amsthm} % Math Theorems
\usepackage{amssymb} % Math Symbols
\usepackage{amsfonts} % Math Fonts
\usepackage{mathtools} % Extra math tools such as PairedDelimiter
\usepackage{upgreek} % Nice sigma => \upsigma
\usepackage{array} % Enables array features
\usepackage{siunitx} % For SI Unit easy formatting

% =============== Figures ===============
\usepackage{float} % Float features
\usepackage{graphicx} % Image insertion.
\usepackage{caption,subcaption} % For custom caption environments
\usepackage{wrapfig} % Al­lows fig­ures or ta­bles to have text wrapped around them
\ifTiKZ
\usepackage{tikz} % Diagram and figure creation and rendering
\usepackage[americanvoltages, europeancurrents, americanresistors, cuteinductors]{circuitikz} % Circuit Graphics
\fi
% =============== Tables ===============
\usepackage{booktabs} % Horizontal rules in tables
\usepackage{float} % Required for tables and figures in the multi
\usepackage{multirow} % Combined rows in tables
\usepackage{multicol} % Combined columns in tables
\usepackage{colortbl} % Color cells
%\usepackage{longtable} % Tables than span multipages

% % =============== Listings ============
\ifLISTINGS
\usepackage{listings} % Main package for inserting code
\usepackage[scaled]{beramono} % For using the beramono font
\fi
% % =============== Algorithms ===============
\ifALGORITHMS
\usepackage{algorithm} % Allows for algorithm description
\usepackage[noend]{algpseudocode}
\fi
% =============== Other ===============
\usepackage{datetime} % Date-Time formatting
\usepackage{ulem} % For strikethrough text \st{}
\usepackage[colorinlistoftodos]{todonotes} % useful for leaving todonotes
\usepackage{textcomp} %Text Com­pan­ion fonts

\usepackage{pdfpages} % Insert pdfs
\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template
% \usepackage[space]{grffile} % insert files with spaces
\usepackage{pdflscape} % Individual horizontal pages
\usepackage{tcolorbox} % Color boxes for comment
%\usepackage{xargs} % Expanded arguments features
%\usepackage{fix-cm} % Computer-Modern at arbitrarysizes
%\usepackage{eurosym} % Eurosymbol

%%%%%%%%%%%%%%%
% PAGE FORMAT %
%%%%%%%%%%%%%%%

\pagestyle{fancy}
\setlength\parindent{0in}
\setlength\parskip{0.1in}
\setlength\headheight{15pt}

%%%%%%%%%%% HEADER / FOOTER %%%%%%%%%%%
\rhead{\textit{Last modified: \today}}
\chead{\textsc{Research Diary}}
\lhead{\textsc{\userName}}
\rfoot{}
\cfoot{\color{gray} \textsc{\thepage~/~\pageref*{LastPage}}}
\lfoot{}

% University Logo
\newcommand{\univlogo}{%
  \noindent % University Logo
  \begin{wrapfigure}{r}{0.1\textwidth}
    \vspace{-38pt}
    \begin{center}
      \includegraphics[width=0.1\textwidth]{Images/univ-logo.png}
    \end{center}
    \vspace{-100pt}
  \end{wrapfigure}
}

\renewcommand{\thesection}{\Roman{section}}
% \renewcommand{\thesubsection}{\thesection.\Roman{subsection}}

%%%%%%%%%%%%
% CAPTIONS %
%%%%%%%%%%%%

%%%% Paragraph separation
%\setlength{\parskip}{.5em}

\numberwithin{equation}{section} % Number equations within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{figure}{section} % Number figures within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{table}{section} % Number tables within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

\newcommand{\gm}[1] {\guillemotleft #1\guillemotright} %$ pretty <<sth>>$

%%%%%%%%%%%%%%%%%
% MATH COMMANDS %
%%%%%%%%%%%%%%%%%
\DeclarePairedDelimiter\paren{(}{)}%
\DeclarePairedDelimiter\bra{[}{]}%
\DeclarePairedDelimiter\curly{\{}{\}}%
\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
\DeclarePairedDelimiter\norm{\lVert}{\rVert}%
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}%
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}%

\newcommand{\grad}{\nabla}
\newcommand{\deriv}[2]{\frac{d #1}{d #2}}
\newcommand{\bigO}{\mathcal{O}}
\DeclareMathSymbol{\umu}{\mathalpha}{operators}{0}


%%%%%%%%
% TikZ %
%%%%%%%%

\ifTiKZ
\usetikzlibrary{shapes,arrows,fit,calc,positioning,automata,decorations.markings}
\fi

%%%%%%%%%%%%%%
% ALGORITHMS %
%%%%%%%%%%%%%%

\ifALGORITHMS

% % Comment
% \renewcommand\algorithmiccomment[1]{%
%   \hfill\ \eqparbox{COMMENT}{#1}%
% }

% Multiline Comment
\newcommand\LONGCOMMENT[1]{%
  \hfill\ \begin{minipage}[t]{\eqboxwidth{COMMENT}}#1\strut\end{minipage}%
}
% Do while
\algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}%
\newcommand{\Break}{\State \textbf{break} }
\newcommand{\Yield}{\State \textbf{yield} }

% Go to
\algnewcommand{\algorithmicgoto}{\textbf{go to}}%
\algnewcommand{\Goto}{\algorithmicgoto\xspace}%
\algnewcommand{\Label}{\State\unskip}

\fi

%%%%%%%%%%%%
% LISTINGS %
%%%%%%%%%%%%

\ifLISTINGS

% Captioning
\AtBeginDocument{\numberwithin{lstlisting}{section}}  % Number listings within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

% Colors
\definecolor{background}{gray}{.98}                 % Background color definition
\definecolor{comments}{RGB}{51,102,0}               % Comments   color definition
\definecolor{keywords}{RGB}{0,0,120}                % Keywords   color definition
\definecolor{keywords2}{RGB}{204,0,102}             % Keywords2  color definition
\definecolor{numbers}{RGB}{127, 0, 127}             % Keywords2  color definition
\definecolor{Maroon}{RGB}{128, 0, 0}

% General config
\lstset{
    frame=Ltb,
    framerule=0pt,
    aboveskip=0.5cm,
    framextopmargin=3pt,
    framexbottommargin=3pt,
    framexleftmargin=0.4cm,
    framesep=0pt,
    rulesep=.4pt,
    rulecolor=\color{black},
    %
    stringstyle=\ttfamily,
    basicstyle=\small\ttfamily,
    commentstyle=\itshape\color{comments},
    keywordstyle=\bfseries\color{keywords},
    %
    % numberstyle=\tiny,
    numberstyle=\small\ttfamily\color{gray},
    numbers=left,
    numbersep=8pt,
    numberfirstline = false,
    %
    breakatwhitespace=false,         % sets if automatic breaks should only happenat whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=t,                    % sets the caption-position to bottom
    escapeinside={<@}{@>},            % if you want to add LaTeX within your code
    keepspaces=true,                 % keeps spaces in text, useful for keepingindentation of code (possibly needs columns=flexible)
    showspaces=false,                % show spaces everywhere adding particularunderscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particularunderscores
    stepnumber=1,                    % the step between two line-numbers. If it's1, each line will be numbered
    tabsize=2,                       % sets default tabsize to 2 spaces
}

% PYTHON
\definecolor{pgreen}{rgb}{0,0.5,0}
\lstdefinestyle{Python}{
    language=Python,
    aboveskip=3mm,
    belowskip=3mm,
    numbers=left,
    numbersep=8pt,
    numberstyle=\small\ttfamily\color{gray},
    basicstyle={\small\ttfamily},
    commentstyle=\color{gray},
    showstringspaces=false,
    tabsize=4,
    showspaces=false,
    showtabs=false,
    breaklines=true,
    showstringspaces=false,
    breakatwhitespace=true,
    commentstyle=\color{pgreen},
    keywordstyle=\color[HTML]{A71D5D},
    stringstyle=\color[HTML]{0086B3},
    basicstyle=\ttfamily,
    upquote=true,
    moredelim=**[is][\btHL]{<|}{|>},%
    literate={*}{{\char42}}1
         {-}{{\char45}}1
         {^}{{\char94}}1
    % http://www.monperrus.net/martin/copy-pastable-ascii-characters-with-pdftex-pdflatex
}

% VHDL
\lstdefinestyle{customvhdl}{
    language=vhdl,                              % Language
    morekeywords = {},
    morestring=[b][\color{numbers}]',
    morestring=[b][\color{numbers}]",
    emph={std_logic,std_logic_vector,integer,unsigned,to_unsigned},
    emphstyle={\color{keywords2}\bfseries},%
    %deletekeywords={...},            % if you want to delete keywords from the given language
}

% Code highlight
\makeatletter
\newenvironment{btHighlight}[1][]
{\begingroup\tikzset{bt@Highlight@par/.style={#1}}\begin{lrbox}{\@tempboxa}}
{\end{lrbox}\bt@HL@box[bt@Highlight@par]{\@tempboxa}\endgroup}

\newcommand\btHL[1][]{%
  \begin{btHighlight}[#1]\bgroup\aftergroup\bt@HL@endenv%
}
\def\bt@HL@endenv{%
  \end{btHighlight}%
  \egroup
}
\newcommand{\bt@HL@box}[2][]{%
  \tikz[#1]{%
    \pgfpathrectangle{\pgfpoint{1pt}{0pt}}{\pgfpoint{\wd #2}{\ht #2}}%
    \pgfusepath{use as bounding box}%
    \node[anchor=base west, fill=orange!30,outer sep=0pt,inner xsep=1pt, inner ysep=0pt, rounded corners=3pt, minimum height=\ht\strutbox+1pt,#1]{\raisebox{1pt}{\strut}\strut\usebox{#2}};
  }%
}
\makeatother
\fi
%%%%%%%%%%%%%%%%%
% TODO COMMANDS %
%%%%%%%%%%%%%%%%%

\newcommand{\hightodo}[1]{\todo[inline,backgroundcolor=red!90!yellow!80!white]{\textbf{\userId}: #1}}
\newcommand{\lowtodo}[1]{\todo[inline,backgroundcolor=blue!30!white]{\textbf{\userId}: #1}}

\newtcolorbox{tip}{colback=blue!5!white,colframe=blue!75!black}
\newtcolorbox{tipt}[1]{colback=blue!5!white,colframe=blue!75!black,fonttitle=\bfseries,title=#1}

% Thick strike out
\newcommand{\soutthick}[1]{%
    \renewcommand{\ULthickness}{3pt}%
       \sout{#1}%
    \renewcommand{\ULthickness}{.4pt}% Resetting to ulem default
}
%%%%%%%%%%%%%%%%%%%
% VECTOR COMMANDS %
%%%%%%%%%%%%%%%%%%%

% \newcommand{\vx}{\bar{x}}
% \newcommand{\vv}{\bar{v}}
% \newcommand{\vw}{\bar{w}}
% \newcommand{\vu}{\bar{u}}
% \newcommand{\vy}{\bar{y}}
% \newcommand{\vt}{\bar{\theta}}

%%%%%%%%%%%%%%%%%%%%%%%%
% INDEPENDENCE SYMBOLS %
%%%%%%%%%%%%%%%%%%%%%%%%

% \makeatletter
% \newcommand*{\indep}{%
%   \mathbin{%
%     \mathpalette{\@indep}{}%
%   }%
% }
% \newcommand*{\nindep}{%
%   \mathbin{%                   % The final symbol is a binary math operator
%     \mathpalette{\@indep}{\not}% \mathpalette helps for the adaptation
%                                % of the symbol to the different math styles.
%   }%
% }
% \newcommand*{\@indep}[2]{%
%   % #1: math style
%   % #2: empty or \not
%   \sbox0{$#1\perp\m@th$}%        box 0 contains \perp symbol
%   \sbox2{$#1=$}%                 box 2 for the height of =
%   \sbox4{$#1\vcenter{}$}%        box 4 for the height of the math axis
%   \rlap{\copy0}%                 first \perp
%   \dimen@=\dimexpr\ht2-\ht4-.2pt\relax
%       % The equals symbol is centered around the math axis.
%       % The following equations are used to calculate the
%       % right shift of the second \perp:
%       % [1] ht(equals) - ht(math_axis) = line_width + 0.5 gap
%       % [2] right_shift(second_perp) = line_width + gap
%       % The line width is approximated by the default line width of 0.4pt
%   \kern\dimen@
%   {#2}%
%       % {\not} in case of \nindep;
%       % the braces convert the relational symbol \not to an ordinary
%       % math object without additional horizontal spacing.
%   \kern\dimen@
%   \copy0 %                       second \perp
% }
% \makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%
%
%%%%%%%%%%%%%%%%%%%%%%%%%